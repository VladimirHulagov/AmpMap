Тест-кейсы
==========

Создание тест-кейса
~~~~~~~~~~~~~~~~~~~

   .. container:: confluence-information-macro-body

      Тест-кейс может быть создан только в рамках тестового набора.


Создание тест-кейса в рамках тестового набора.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Создание тест-кейса также доступно на странице тестового набора в меню,
открывающемся при нажатии на название тестового набора:

|image40|

При таком способе создания тест-кейса в поле **Suite** автоматически
выбран тестовый набор, в котором была открыта форма создания:

|image41|

При необходимости пользователь может выбрать другой тестовый набор.

Создание тест-кейса на стартовой странице
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Создание тест-кейса также доступно на стартовой странице раздела Test
Suites & Cases :

|image42|

При таком способе создания тест-кейса поле Suite по умолчанию не
заполнено, но обязательно к заполнению.

Тест-кейс может быть сценарным или пошаговым:

- Для сценарного тест-кейса заполняется поле Scenario и общий ожидаемый
  результат в поле Expected .

- Для пошагового тест-кейса в поле Scenario установите флажок Steps,
  введите название шагов и ожидаемый результат для каждого шага:

  |image43|

Вне зависимости от типа тест-кейса по умолчанию необходимо заполнить
следующие параметры:


   +--------------------+-------------------+---------------------------+
   | **Параметр**       | **Применимость**  | **Комментарий**           |
   +--------------------+-------------------+---------------------------+
   | **Name**           | Обязательное поле | Название тест-кейса.      |
   +--------------------+-------------------+---------------------------+
   | **Setup**          | Опциональное поле | Условия, которые          |
   |                    |                   | необходимо выполнить      |
   |                    |                   | перед прохождением        |
   |                    |                   | тест-кейса.               |
   +--------------------+-------------------+---------------------------+
   | **Scenario/Steps** | Обязательное поле | Тестовый сценарий. В      |
   |                    |                   | пошаговом тест-кейсе      |
   |                    |                   | сценарий заполняется для  |
   |                    |                   | каждого шага.             |
   +--------------------+-------------------+---------------------------+
   | **Expected**       | Опциональное поле | Ожидаемый результат.      |
   |                    |                   | Доступно для заполнения в |
   |                    |                   | сценарном тест-кейсе. В   |
   |                    |                   | пошаговом тест-кейсе      |
   |                    |                   | поле заполняется отдельно |
   |                    |                   | для каждого шага.         |
   +--------------------+-------------------+---------------------------+
   | **Teardown**       | Опциональное поле | Условия, которые          |
   |                    |                   | необходимо выполнить по   |
   |                    |                   | окончании выполнения      |
   |                    |                   | тест-кейса.               |
   +--------------------+-------------------+---------------------------+
   | **Estimate**       | Опциональное поле | Временная оценка          |
   |                    |                   | выполнения тест-кейса.    |
   +--------------------+-------------------+---------------------------+
   | **Labels**         | Опциональное поле | Метки тест-кейса.         |
   |                    |                   | Пользователь может        |
   |                    |                   | выбрать лейбл из уже      |
   |                    |                   | существующих в проекте    |
   |                    |                   | или :ref:`создать         |
   |                    |                   | новый <labels>`           |
   +--------------------+-------------------+---------------------------+
   | **Description**    | Опциональное поле | Описание тест-кейса.      |
   +--------------------+-------------------+---------------------------+
   | **Suite**          | Обязательное поле | Тестовый набор, в котором |
   |                    |                   | находится тест-кейс.      |
   +--------------------+-------------------+---------------------------+

|

Набор полей может быть расширен за счет создания пользовательских
атрибутов в момент создания тест-кейса. Такие атрибуты будут доступны
для заполнения только в создаваемом тест-кейсе.

Все текстовые поля поддерживают добавление вложений.


Работа с тест-кейсом
~~~~~~~~~~~~~~~~~~~~

Доступные действия с тест-кейсами:

- просмотр,
- копирование,
- изменение,
- фильтрация,
- массовые операции


Просмотр тест-кейса
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В приложении поддерживается два варианта представления тест-кейсов:

- Древовидное — представление, аналогичное навигации по тестовым
наборам:

    |image44|

    Столбцы в древовидном представлении:

    |image45|

    |

    .. container:: table-wrap

       ============== ====================================================
       **Столбец**    **Описание**
       **ID**         Идентификатор тест-кейса.
       **Name**       Имя тестового набора или тест-кейса в нем.
       **Labels**     Метки, добавленные к тест-кейсу.
       **Estimate**   Временная оценка тест-кейса.
       **Created At** Дата создания тестового набора или тест-кейса в нем.
       ============== ====================================================

- Табличное — все тест-кейсы отображаются в плоской структуре. В таблице
  представлены все тест-кейсы от выбранного тестового набора и вниз до
  последнего дочернего тестового набора включительно. Если родительский
  тестовый набор не выбран, отображаются все тестовые кейсы, созданные в
  проекте.

  Табличное представление дополнено пагинацией, количество элементов для
  показа 10-50-100:

  |image46|

  Столбцы в табличном представлении:

  |image47|

  |

  .. container:: table-wrap

     ============== ===============================================
     **Столбец**    **Описание**
     **ID**         Идентификатор тест-кейса.
     **Name**       Имя тест-кейса.
     **Test Suite** Тестовый набор, в котором расположен тест-кейс.
     **Labels**     Метки, добавленные к тест-кейсу.
     **Estimate**   Временная оценка тест-кейса.
     **Created At** Дата создания тест-кейса.
     ============== ===============================================

Набор столбцов для табличного и древовидного представления можно
изменять с помощью меню, расположенного над представлением в правой
части экрана. В меню доступна сортировка элементов представления, фильтр
и переключение представлений:

|image48|

При нажатии на название тест-кейса открывается правая боковая панель с
детальной информацией:

- Информация, заполненная при создании тестового кейса.
- Кнопки изменения/копирования/архивации/удаления/восстановления версии,
  если открыта не последняя версия тест-кейса.
- Выпадающий список версий тест-кейса.
- В нижней части правой боковой панели:

  - Вкладка **Comments**, содержащая комментарии к тест-кейсу.
  - Вкладка **Tests**, содержащая информацию о тестовых планах, в
    которые добавлен тест-кейс, а также информацию о последнем статусе
    тестового результата в конкретном тест-плане.
  - Вкладка **History**, содержащая историю изменений.

|image49| |image50|


Копирование тест-кейса
~~~~~~~~~~~~~~~~~~~~~~

Тест-кейс можно скопировать внутри проекта. При копировании необходимо
выбрать название нового тест-кейса и тестовый набор:

|image51|


Изменение тест-кейса
~~~~~~~~~~~~~~~~~~~~

При редактировании тест-кейса открывается вкладка, аналогичная вкладке
создания тест-кейса.


Редактирование атрибутов


На этапе редактирования пользователь может добавить дополнительные
пользовательские атрибуты, как и во время создания тест-кейса.

Если в течение жизни тест-кейса на уровне проекта были добавлены новые
атрибуты, при редактировании тестового кейса они будут добавлены в
соответствии с настройками, установленными при их создании —
обязательные атрибуты останутся обязательными. Если какие-либо атрибуты
были удалены, они останутся в тест-кейсе, но появится возможность их
удалить.

Если атрибут был ранее добавлен как пользовательский, но в течение жизни
тест-кейса стал обязательным на уровне проекта, значение атрибута будет
изменено из пользовательского атрибута в проектный. Если тип атрибута,
созданного на уровне проекта, отличается от изначального типа атрибута,
будет использоваться тип проектного атрибута.


Редактирование версии
~~~~~~~~~~~~~~~~~~~~~


Результаты изменения тест-кейса можно сохранить с увеличением версии
тест-кейса, либо без увеличения версии. Сохранение без увеличения версии
доступно только автору редактируемой версии тест-кейса.

После успешного сохранения изменений новая версия тест-кейса
заменит собой тесты во всех тест-планах, в которые был ранее
добавлен тест-кейс. Результаты, добавленные к предыдущим версиям
изменены не будут.

Доступно восстановление версии тестового кейса. Восстановление версии
осуществляется созданием новой версии, идентичной восстанавливаемой.
(Т.е. пользователю нужно создать новую версию?)


Архивация и удаление тест-кейса
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Архивация и удаление осуществляются нажатием на соответствующие кнопки,
расположенные в верхней части правой боковой панели:


При архивации либо удалении тест-кейса все связанные с ним объекты
будут также удалены/архивированы.

|image52|

Фильтрация тест-кейсов
~~~~~~~~~~~~~~~~~~~~~~~

Фильтр расположен над списком тест-кейсов в правой части экрана:

|image53|

При нажатии на кнопку **FILTER** открывается правая боковая панель:

|image54|

Строка поиска интегрирована в фильтр и является одним из его сегментов.
Тест-кейсы можно фильтровать по сочетанию условий, не зависящих друг от
друга.

Фильтр в разделе **Test Suites & Cases** не является иерархическим
и включает в себя следующие сегменты:

* **Name or ID** — строка поиска по имени и ID. Если открыть фильтр,\
  не переходя в конкретный тестовый набор, поиск будет осуществляться\
  по всему проекту.

* **Test Suite** — селектор наборов. При выборе селектора наборов\
  доступен переключатель **Show full tree**, который отображает все\
  наборы вне зависимости от места, в котором открыт фильтр. Даже если\
  фильтр открыт в конкретном тестовом наборе, в селекторе будут\
  доступны все наборы проекта.

* **Label** — метки тест-кейсов. Доступен выбор нескольких меток с применением условий OR/AND.

* **Test Suite Created At** — временной интервал от даты создания тестового набора.

* **Test Case Created At** — временной интервал от даты создания тест-кейса.

* **Show Archived** — архивные тест-кейсы и тестовые наборы.

Фильтры можно сохранять/редактировать/удалять. Сохраненные фильтры
доступны в рамках проекта. Пользователю доступно создание
неограниченного количества фильтров.

Массовые операции с тест-кейсами
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

В табличном представлении Test Cases доступно выполнение массовых операций. 
Выбор тест-кейсов для осуществления массовой операции производится с помощью чек-боксов, расположенных в самой левой колонке представления. 
При отметке чек-бокса, который находится в заголовке таблицы, выбираются все элементы вне зависимости от пагинации.
После выбора хотя бы одного теста-кейса, справа от заголовка Test Cases появляется выпадающее меню Actions, в выпадающем меню представлены доступные операции:

- Move Cases (перенос тест-кейсов)
- Change Labels (изменение лейблов)

Перенос тест-кейсов
"""""""""""""""""""
Массовая операция Move Cases осуществляет перенос выбранных тест-кейсов из текущего тестового набора в целевой.
Для переноса тест-кейсов отметьте тест-кейсы, которые необходимо перенести. Затем выберете соответствующую опцию в выпадающем меню Actions.

|bulkMoveCasesStep1|

В открывшемся окне выберете тестовый набор, в который необходимо перенести тест-кейсы, и нажмите на кнопку Save.

|bulkMoveCasesStep2|

   .. container:: confluence-information-macro-body
      В случае если выбрано значительное количество тест-кейсов, операция может занять некоторое время.

Изменение лейблов
"""""""""""""""""
+-------------------------+--------------------------------------------------------------------------------------+
| Действие                | Описание                                                                             |
+=========================+======================================================================================+
| Add to existing         | Добавляет лейбл/лейблы к существующим лейблам в выбранных тест-кейсах.               |
+-------------------------+--------------------------------------------------------------------------------------+
| Replace all with new    | Заменяет в выбранных тест-кейсах существующие лейблы на выбранные.                   |
+-------------------------+--------------------------------------------------------------------------------------+
| Find and remove label   | Осуществляет поиск по существующим лейблам в тест-кейсах и удаляет выбранные лейблы. |
+-------------------------+--------------------------------------------------------------------------------------+
| Remove all labels       | Удаляет все существующие лейблы в выбранных тест-кейсах.                             |
+-------------------------+--------------------------------------------------------------------------------------+

Для изменения лейблов в тест-кейсах отметьте тест-кейсы, для которых нужно выполнить операцию. Затем выберете соответствующую опцию в выпадающем меню Actions.

|bulkChangeLabelsStep1|

В открывшемся окне с помощью выпадающего списка Action выберете одно из доступных действий (действия описаны выше).

|bulkChangeLabelsStep2|

В поле Labels выберете необходимые лейблы (доступен множественный выбор из существующих лейблов, а также создание новых лейблов).

|bulkChangeLabelsStep3|

Нажмите на кнопку Submit.

   .. container:: confluence-information-macro-body
      В случае если выбрано значительное количество тест-кейсов, операция может занять некоторое время.


.. |image40| image:: ../../static/image40.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image41| image:: ../../static/image41.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image42| image:: ../../static/image42.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image43| image:: ../../static/image43.png
   :class: confluence-embedded-image
   :width: 500px
.. |image44| image:: ../../static/image44.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image45| image:: ../../static/image45.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image46| image:: ../../static/image46.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image47| image:: ../../static/image47.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image48| image:: ../../static/image48.png
   :class: confluence-embedded-image
   :width: 1000px
.. |image49| image:: ../../static/image49.png
   :class: confluence-embedded-image
   :width: 700px
.. |image50| image:: ../../static/image50.png
   :class: confluence-embedded-image
   :width: 200px
.. |image51| image:: ../../static/image51.png
   :class: confluence-embedded-image
   :width: 500px
.. |image52| image:: ../../static/image52.png
   :class: confluence-embedded-image
   :height: 250px
.. |image53| image:: ../../static/image53.png
   :class: confluence-embedded-image
   :width: 800px
.. |image54| image:: ../../static/image54.png
   :class: confluence-embedded-image
   :width: 800px
.. |bulkMoveCasesStep1| image:: ../../static/bulkMoveCasesStep1.png
   :class: confluence-embedded-image
   :width: 600px
.. |bulkMoveCasesStep2| image:: ../../static/bulkMoveCasesStep2.png
   :class: confluence-embedded-image
   :width: 600px
.. |bulkChangeLabelsStep1| image:: ../../static/bulkChangeLabelsStep1.png
   :class: confluence-embedded-image
   :width: 600px
.. |bulkChangeLabelsStep2| image:: ../../static/bulkChangeLabelsStep2.png
   :class: confluence-embedded-image
   :width: 600px
.. |bulkChangeLabelsStep3| image:: ../../static/bulkChangeLabelsStep3.png
   :class: confluence-embedded-image
   :width: 600px